# 如何查看SS开启了哪些端口？
**编辑：休山**


#### 搭建SS

1. 自动安装SS，代码如下：

```
wget --no-check-certificate -O shadowsocks.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh
chmod +x shadowsocks.sh
./shadowsocks.sh 2&gt;&amp;1 | tee shadowsocks.log
```

2.根据提示逐步设置ss类型，密码，端口，加密类型等，根据需要选择，不懂的话默认回车。特别注意，ios终端有些软件不支持shadowsocksR，谨慎选择。
```
Which Shadowsocks server you’d select:
1) Shadowsocks-Python
2) ShadowsocksR
3) Shadowsocks-Go
4) Shadowsocks-libev
Please enter a number
(Default Shadowsocks-Python):1
You choose = Shadowsocks-Python

Please enter password for Shadowsocks-Python
(Default password: teddysun.com):123456

password = 123456

Please enter a port for Shadowsocks-Python [1-65535]
(Default port: 11260):10086

port = 10086
```
3.按照提示输入完成，命令执行完后会出来SS通道信息。如下所示：（可以复制保存一下）
```
INFO: loading config from /etc/shadowsocks-python/config.json2019-03-28 05:14:24 INFO     loading libcrypto from libcrypto.so.10Starting Shadowsocks successCongratulations, Shadowsocks-Python server install completed!
Your Server IP        :  123.234.222.210
Your Server Port      :  10086
Your Password         :  123456
Your Encryption Method:  aes-256-cfb
Your QR Code: (For Shadowsocks Windows, OSX, Android and iOS clients)
ss://xxxxxxxxxxxxxxxxx
Your QR Code has been saved as a PNG file 
path:/root/shadowsocks_python_qr.png

Welcome to visit: 
https://teddysun.com/486.html
Enjoy it!
```

## 如何查看SS端口及端口参数

1. 查询SS配置文件

```
cd /etc/

ll
```
终端会显示以下内容：
```
total 1408
***
（此处省略部分显示结果）
***
-rw-r--r--   1 root root        0 Nov 18 07:04 shadowsocks.json
drwxr-xr-x   2 root root     4096 Nov 15 00:23 shadowsocks-libev
drwxr-xr-x   2 root root     4096 Nov 15 02:04 shadowsocks-r
***
（此处省略部分显示结果）
***
```
很多相关教程都让修改shadowsocks.json文件，但是在我的文件夹内，shadowsocks.json文件的文件大小为0Kb。因此无法修改。
但是，经研究发现，shadowsocks-libev和shadowsocks-r中均有一个config.json文件。终端输入以下代码：
```
cd /etc/shadowsocks-r/
ll
cat config.json 
```
输出如下：
```
{
    "server":"0.0.0.0",
    "server_port":10086,
    "password":"123456",
    "timeout":300,
    "user":"nobody",
    "method":"aes-256-cfb",
    "fast_open":false,
    "nameserver":"8.8.8.8",
    "mode":"tcp_and_udp"
}
```
2.修改文件，使用`vi`指令，输入如下：
```
vi config.json
```
输出如下：
```
{
    "server":"0.0.0.0",
    "server_port":10086,
    "password":"123456",
    "timeout":300,
    "user":"nobody",
    "method":"aes-256-cfb",
    "fast_open":false,
    "nameserver":"8.8.8.8",
    "mode":"tcp_and_udp"
}
~                                                                                                                                                                 
~                                                                                                                                                                 
~                                                                                                                                                                 
~                                                                                                                                                                 
                                          
"config.json" 11L, 227C

```
此时界面是可输入界面，修改完成后，按`esc`键，然后输入`:wq`按回车键结束修改。
## SS端口

1. 查看服务器端口监听情况
```
netstat -an
```
2. 查看端口的连接数

```
netstat -nat | grep -f "port" | wc -l
```
3. 过滤掉监控127.0.0.1的端口
```
netstat -lntp   --inet | grep -v 127.0.0.1
```

